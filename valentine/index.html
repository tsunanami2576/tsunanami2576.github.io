<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
    <meta name="description" content="A romantic Valentine's Day photo heart gift">
    <title>Our Memories â¤ï¸</title>
    
    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@400;700&family=Playfair+Display:ital@0;1&display=swap" rel="stylesheet">
    
    <!-- Stylesheets -->
    <link rel="stylesheet" href="css/main.css">
    <link rel="stylesheet" href="css/heart.css">
    <link rel="stylesheet" href="css/viewer.css">
</head>
<body>
    <!-- Configuration Modal -->
    <div id="configModal" class="modal hidden">
        <div class="modal-content">
            <h2>ğŸ” é…ç½® GitHub å­˜å‚¨</h2>
            <p class="modal-hint">ä¸ºäº†æŒä¹…ä¿å­˜ç…§ç‰‡ï¼Œè¯·æä¾› GitHub Personal Access Token</p>
            
            <div class="form-group">
                <label for="githubUsername">GitHub ç”¨æˆ·å</label>
                <input type="text" id="githubUsername" placeholder="your-username">
            </div>
            
            <div class="form-group">
                <label for="githubRepo">ä»“åº“åç§°</label>
                <input type="text" id="githubRepo" placeholder="your-username.github.io">
            </div>
            
            <div class="form-group">
                <label for="githubToken">Personal Access Token</label>
                <input type="password" id="githubToken" placeholder="ghp_...">
                <small>æƒé™éœ€è¦: <code>repo</code> | <a href="https://github.com/settings/tokens/new" target="_blank">åˆ›å»º Token</a></small>
            </div>
            
            <div class="form-group">
                <label for="photoPath">ç…§ç‰‡ä¿å­˜è·¯å¾„</label>
                <input type="text" id="photoPath" placeholder="valentine/assets/photos" value="valentine/assets/photos">
            </div>
            
            <div class="modal-actions">
                <button id="testConnection" class="btn-secondary">æµ‹è¯•è¿æ¥</button>
                <button id="saveConfig" class="btn-primary">ä¿å­˜é…ç½®</button>
            </div>
            
            <div id="configStatus" class="status-message hidden"></div>
        </div>
    </div>
    
    <!-- Loading Overlay -->
    <div id="loadingOverlay" class="loading-overlay hidden">
        <div class="loading-heart">
            <svg viewBox="0 0 32 32" width="80" height="80">
                <path d="M16,28.261c0,0-14-7.926-14-17.046c0-9.356,13-9.356,14-0.896c1-8.459,14-8.459,14,0.896 C30,20.335,16,28.261,16,28.261z" fill="#FF69B4"/>
            </svg>
        </div>
        <p class="loading-text">ä¸Šä¼ ä¸­...</p>
    </div>
    
    <!-- Toast Notification -->
    <div id="toast" class="toast hidden"></div>
    
    <!-- Main Container -->
    <div class="container">
        <header class="page-header">
            <h1 class="title">Our Memories â¤ï¸</h1>
        </header>
        
        <!-- Heart Photo Grid -->
        <div id="heartContainer" class="heart-container">
            <!-- Photos will be dynamically inserted here -->
        </div>
        
        <!-- Settings Button -->
        <button id="settingsBtn" class="settings-btn" title="é…ç½® GitHub å­˜å‚¨">
            <svg viewBox="0 0 24 24" width="24" height="24" fill="currentColor">
                <path d="M19.14,12.94c0.04-0.3,0.06-0.61,0.06-0.94c0-0.32-0.02-0.64-0.07-0.94l2.03-1.58c0.18-0.14,0.23-0.41,0.12-0.61 l-1.92-3.32c-0.12-0.22-0.37-0.29-0.59-0.22l-2.39,0.96c-0.5-0.38-1.03-0.7-1.62-0.94L14.4,2.81c-0.04-0.24-0.24-0.41-0.48-0.41 h-3.84c-0.24,0-0.43,0.17-0.47,0.41L9.25,5.35C8.66,5.59,8.12,5.92,7.63,6.29L5.24,5.33c-0.22-0.08-0.47,0-0.59,0.22L2.74,8.87 C2.62,9.08,2.66,9.34,2.86,9.48l2.03,1.58C4.84,11.36,4.8,11.69,4.8,12s0.02,0.64,0.07,0.94l-2.03,1.58 c-0.18,0.14-0.23,0.41-0.12,0.61l1.92,3.32c0.12,0.22,0.37,0.29,0.59,0.22l2.39-0.96c0.5,0.38,1.03,0.7,1.62,0.94l0.36,2.54 c0.05,0.24,0.24,0.41,0.48,0.41h3.84c0.24,0,0.44-0.17,0.47-0.41l0.36-2.54c0.59-0.24,1.13-0.56,1.62-0.94l2.39,0.96 c0.22,0.08,0.47,0,0.59-0.22l1.92-3.32c0.12-0.22,0.07-0.47-0.12-0.61L19.14,12.94z M12,15.6c-1.98,0-3.6-1.62-3.6-3.6 s1.62-3.6,3.6-3.6s3.6,1.62,3.6,3.6S13.98,15.6,12,15.6z"/>
            </svg>
        </button>
    </div>
    
    <!-- Photo Viewer -->
    <div id="photoViewer" class="photo-viewer hidden">
        <div class="viewer-backdrop"></div>
        <div class="photo-card" data-tilt>
            <div class="photo-inner">
                <img src="" alt="" class="photo-image">
                <div class="holographic-overlay"></div>
                <div class="photo-timestamp"></div>
            </div>
        </div>
    </div>
    
    <!-- Hidden File Input -->
    <input type="file" id="fileInput" accept="image/*" capture="camera" style="display: none;">
    
    <!-- External Libraries -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/gsap.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/exif-js"></script>
    
    <!-- Application Scripts -->
    <script src="js/config.js"></script>
    <script src="js/heart-layout.js"></script>
    <script src="js/github-api.js"></script>
    <script src="js/photo-manager.js"></script>
    <script src="js/viewer.js"></script>
    
    <!-- Initialize App -->
    <script>
        // App initialization
        document.addEventListener('DOMContentLoaded', () => {
            console.log('ğŸ’ Valentine Photo Heart App Loaded');
            
            // Initialize components
            Config.init();
            HeartLayout.init();
            PhotoManager.init();
            PhotoViewer.init();
            
            // Always load photos directly (skip config modal)
            // Config uses DEFAULT_CONFIG if localStorage is empty
            PhotoManager.loadPhotos();
        });
    </script>
</body>
</html>
